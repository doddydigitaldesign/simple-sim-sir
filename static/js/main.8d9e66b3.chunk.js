(this["webpackJsonpsimple-sim-sir"]=this["webpackJsonpsimple-sim-sir"]||[]).push([[0],{14:function(e,t,a){e.exports=a(22)},19:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),l=a(9),o=a.n(l),s=(a(19),function(){return r.a.createElement("footer",{className:"jumbotron bg-dark text-center"},r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Source:"," ",r.a.createElement("a",{href:"https://github.com/doddydigitaldesign/simple-sim-sir"},"https://github.com/doddydigitaldesign/simple-sim-sir")),r.a.createElement("p",null,"MIT"," ",r.a.createElement("a",{href:"https://github.com/doddydigitaldesign/simple-sim-sir/blob/master/LICENSE"},"License"))))}),c=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"https://doddydigitaldesign.github.io/simple-sim-sir/"},"Contact Disease Mechanics"))},m=a(4),d={canvasWidth:.8*window.innerWidth,canvasHeight:.8*window.innerHeight,ballRadius:5,maxVelocity:1,initialInfectious:50,initialPopulationSize:1e3,transmissionRate:.01,timeToRemoved:1e4,gravity:0,timeScale:1},u=a(2),f=a(1),v=a(7),p=a(10),S=a(11),E=a(12),b=a(13),h=a(3),g=a.n(h);!function(e){e.INFECTIOUS="INFECTIOUS",e.SUSCEPTIBLE="SUSCEPTIBLE",e.REMOVED="REMOVED"}(n||(n={}));var I=function(e){switch(e){case n.INFECTIOUS:return"red";case n.REMOVED:return"white";default:return"dodgerblue"}},N=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},O=function(e){return function(){for(var e=0,t=0;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()>=e},y=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).customRef=void 0,n.state={I:e.initialInfected,R:0,S:e.populationSize-e.initialInfected,ballStates:{},engine:void 0,render:void 0},n.customRef=r.a.createRef(),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=g.a.Engine,a=g.a.Render,i=g.a.World,r=g.a.Bodies,l=g.a.Events,o=g.a.Mouse,s=g.a.MouseConstraint,c=t.create({positionIterations:1,velocityIterations:1}),m={scale:1,x:d.gravity,y:d.gravity},p={timeScale:d.timeScale,timestamp:0};c.world.gravity=m,c.timing=p;var S=a.create({element:this.customRef.current,engine:c,options:{width:d.canvasWidth,height:d.canvasHeight,wireframes:!1}});i.add(c.world,[r.rectangle(d.canvasWidth/2,0,d.canvasWidth,1,{isStatic:!0}),r.rectangle(d.canvasWidth/2,d.canvasHeight,d.canvasWidth,1,{isStatic:!0}),r.rectangle(0,d.canvasHeight/2,1,d.canvasHeight,{isStatic:!0}),r.rectangle(d.canvasWidth,d.canvasHeight/2,1,d.canvasHeight,{isStatic:!0})]);var E=Object(v.a)(Array(this.props.populationSize).keys()).map((function(e){var t=I(n.SUSCEPTIBLE);e<=d.initialInfectious&&(t=I(n.INFECTIOUS));var a={frictionStatic:0,slop:0,frictionAir:0,restitution:1,friction:0,density:10,inertia:0,speed:1,force:{x:N(-d.maxVelocity,d.maxVelocity),y:N(-d.maxVelocity,d.maxVelocity)},render:{fillStyle:t}};return r.circle(N(0,d.canvasWidth),N(0,d.canvasHeight),d.ballRadius,a)}));i.add(c.world,Object(v.a)(E));var b=o.create(S.canvas),h=s.create(c,{mouse:b,constraint:{stiffness:1,render:{visible:!1}}});i.add(c.world,h),l.on(c,"collisionStart",(function(t){for(var a=t.pairs,i=function(){var t,i,o=(l=a[r]).timeCreated,s=l.timeUpdated,c=l.bodyA,m=l.bodyB;c.render.fillStyle!==I(n.INFECTIOUS)||e.state.ballStates[c.id]||e.setState((function(e){return Object(f.a)({},e,{ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},c.id,{relation:n.INFECTIOUS,timeStamp:o}))})})),m.render.fillStyle!==I(n.INFECTIOUS)||e.state.ballStates[m.id]||e.setState((function(e){return Object(f.a)({},e,{ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.INFECTIOUS,timeStamp:o}))})})),c.render.fillStyle===I(n.INFECTIOUS)&&l.timeUpdated-(null===(t=e.state.ballStates[c.id])||void 0===t?void 0:t.timeStamp)>=e.props.timeToRemoved&&(e.setState((function(e){return Object(f.a)({},e,{I:0===e.I?0:e.I-1,R:0===e.I?e.R:e.R+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},c.id,{relation:n.REMOVED,timeStamp:s}))})})),c.render.fillStyle=I(n.REMOVED)),m.render.fillStyle===I(n.INFECTIOUS)&&l.timeUpdated-(null===(i=e.state.ballStates[m.id])||void 0===i?void 0:i.timeStamp)>=e.props.timeToRemoved&&(e.setState((function(e){return Object(f.a)({},e,{I:0===e.I?0:e.I-1,R:0===e.I?e.R:e.R+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.REMOVED,timeStamp:s}))})})),m.render.fillStyle=I(n.REMOVED)),c.render.fillStyle===I(n.SUSCEPTIBLE)&&m.render.fillStyle===I(n.INFECTIOUS)&&O(e.props.transmissionRate)&&O(1-e.props.transmissionRate)&&(e.setState((function(e){return Object(f.a)({},e,{S:0===e.S?0:e.S-1,I:e.I+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},c.id,{relation:n.INFECTIOUS,timeStamp:s}))})})),c.render.fillStyle=I(n.INFECTIOUS)),m.render.fillStyle===I(n.SUSCEPTIBLE)&&c.render.fillStyle===I(n.INFECTIOUS)&&O(1-e.props.transmissionRate)&&(e.setState((function(e){return Object(f.a)({},e,{S:0===e.S?0:e.S-1,I:e.I+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.INFECTIOUS,timeStamp:s}))})})),m.render.fillStyle=I(n.INFECTIOUS))},r=0;r<a.length;r++){var l;i()}})),t.run(c),a.run(S),this.setState({render:S,engine:c})}},{key:"componentWillUnmount",value:function(){this.state.engine&&h.Engine.clear(this.state.engine),0===this.state.I&&this.props.setRunning(!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid jumbotron bg-dark"},r.a.createElement("div",{className:"row text-center justify-content-center"},r.a.createElement("p",{className:"lead"},"Susceptible: ",this.state.S," | Infected: ",this.state.I," | Removed:"," ",this.state.R)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{ref:this.customRef})))}}]),a}(r.a.Component),w=function(){var e=Object(i.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],l=Object(i.useState)(d.initialPopulationSize),o=Object(m.a)(l,2),s=o[0],c=o[1],u=Object(i.useState)(d.initialInfectious),f=Object(m.a)(u,2),v=f[0],p=f[1],S=Object(i.useState)(d.timeToRemoved),E=Object(m.a)(S,2),b=E[0],h=E[1],g=Object(i.useState)(d.transmissionRate),I=Object(m.a)(g,2),N=I[0],O=I[1];return r.a.createElement("main",{className:"text-center"},r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col"},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement("div",{className:"form-row align-items-center"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"popSize"},"Population Size: ",s," individuals"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},"Determines the total number of individuals used in the simulation. Larger numbers affect performance negatively."),r.a.createElement("input",{disabled:a,id:"popSize",value:s,min:0,step:50,max:5e3,onChange:function(e){c(+e.target.value)},type:"range",className:"form-control-range"}))),r.a.createElement("div",{className:"form-row align-items-center"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"initialInfected"},"Initial Infected: ",v," individuals"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},"Determines the number of infected individuals at the start of the simulation."),r.a.createElement("input",{disabled:a,id:"initialInfected",value:v,min:0,step:50,max:s,onChange:function(e){p(+e.target.value)},type:"range",className:"form-control-range"}))),r.a.createElement("div",{className:"form-row align-items-center"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"timeToRemoved"},"Infection Time: ",Math.floor(b/1e3),"s"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},'Determines the amount of time spent in an "infected" state.'),r.a.createElement("input",{disabled:a,id:"timeToRemoved",value:b,min:0,step:1e3,max:1e5,onChange:function(e){h(+e.target.value)},type:"range",className:"form-control-range"}))),r.a.createElement("div",{className:"form-row align-items-center"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"transmissionRate"},"Virulence: ",Math.floor(100*N),"%"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},"Determines the probability or spreading the infection via contact."),r.a.createElement("input",{disabled:a,id:"transmissionRate",value:N,min:0,max:1,step:.01,onChange:function(e){O(+e.target.value)},type:"range",className:"form-control-range"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{disabled:!a,className:"btn btn-danger",onClick:function(e){e.preventDefault(),n(!1)}},"Stop"),r.a.createElement("button",{disabled:a,className:"btn btn-primary",onClick:function(e){e.preventDefault(),n(!0)}},"Start")))),r.a.createElement("div",{className:"col"})),a&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(y,{setRunning:n,initialInfected:v,transmissionRate:N,timeToRemoved:b,populationSize:s})))))};var R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c,null),r.a.createElement("div",{className:"App container-fluid bg-dark text-light"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col"},r.a.createElement(w,null)),r.a.createElement("div",{className:"col"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(s,null)))))},j=(a(21),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function C(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var T=document.getElementById("root");T&&o.a.createRoot(T).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null))),function(e){if("serviceWorker"in navigator){if(new URL("/simple-sim-sir",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/simple-sim-sir","/service-worker.js");j?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):C(t,e)}))}}()}},[[14,1,2]]]);
//# sourceMappingURL=main.8d9e66b3.chunk.js.map