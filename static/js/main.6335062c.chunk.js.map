{"version":3,"sources":["types/relations.ts","config.ts","types/vector.ts","components/Ball.tsx","components/Tracker.tsx","components/Canvas.tsx","components/Footer.tsx","components/Form.tsx","components/Stats.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["RelationTypes","config","canvasWidth","window","innerWidth","canvasHeight","innerHeight","ballRadius","maxVelocity","initialInfectious","initialPopulationSize","transmissionRate","timeToRemoved","Vector","x","y","this","vector","Math","sqrt","magnitude","n","rand","max","floor","random","Ball","ctx","index","position","velocity","relation","radius","count","round","INFECTIOUS","SUSCEPTIBLE","fillStyle","REMOVED","getBallColor","shadowColor","getShadowColor","shadowBlur","save","scale","translate","path","Path2D","moveTo","arc","PI","fill","restore","draw","ball","tempVelocity","Tracker","width","height","popSize","stats","balls","populate","update","coinFlip","setTimeout","lengthBalls","length","clearRect","forEach","i","j","isCollided","collide","tryInfect","requestAnimationFrame","ball1","ball2","distance","newBall","push","S","I","R","map","type","console","log","Canvas","props","ref","useRef","useEffect","current","getContext","tracker","populationSize","setInterval","getStats","handleSetStats","clearInterval","Footer","className","href","Form","htmlFor","aria-describedby","id","min","value","onChange","setPopulationSize","name","setTimeToRemoved","setTransmissionRate","ListItem","bgColor","textColor","text","Stats","susceptible","infected","removed","App","useState","susceptibleCount","setSusceptibleCount","infectedCount","setInfectedCount","removedCount","setRemovedCount","handleUpdateStats","e","parseInt","target","parseFloat","useCallback","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","rootEl","document","getElementById","ReactDOM","createRoot","render","StrictMode","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.6335062c.chunk.js","sourcesContent":["export enum RelationTypes {\r\n  INFECTIOUS = \"INFECTIOUS\",\r\n  SUSCEPTIBLE = \"SUSCEPTIBLE\",\r\n  REMOVED = \"REMOVED\"\r\n}\r\n","export const config = {\r\n  canvasWidth: window.innerWidth * 0.8,\r\n  canvasHeight: window.innerHeight * 0.8,\r\n  ballRadius: 10,\r\n  maxVelocity: 1,\r\n  initialInfectious: 10,\r\n  initialPopulationSize: 200,\r\n  transmissionRate: 0.02,\r\n  timeToRemoved: 10\r\n};\r\n","export class Vector {\r\n  public x: number;\r\n  public y: number;\r\n  constructor(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  add(vector: Vector) {\r\n    return new Vector(this.x + vector.x, this.y + vector.y);\r\n  }\r\n\r\n  magnitude() {\r\n    return Math.sqrt(this.x ** 2 + this.y ** 2);\r\n  }\r\n\r\n  dot(vector: Vector) {\r\n    return this.x * vector.x + this.y * vector.y;\r\n  }\r\n\r\n  normalize() {\r\n    return new Vector(this.x / this.magnitude(), this.y / this.magnitude());\r\n  }\r\n\r\n  scale(n: number) {\r\n    return new Vector(this.x * n, this.y * n);\r\n  }\r\n}\r\n","import { config } from \"../config\";\r\nimport { RelationTypes } from \"../types/relations\";\r\nimport { Vector } from \"../types/vector\";\r\n\r\nconst rand = (max: number) => 1 + Math.floor(Math.random() * max);\r\n\r\nconst getBallColor = (relation: RelationTypes) => {\r\n  switch (relation) {\r\n    case RelationTypes.INFECTIOUS:\r\n      return \"red\";\r\n    case RelationTypes.REMOVED:\r\n      return \"white\";\r\n    default:\r\n      return \"dodgerblue\";\r\n  }\r\n};\r\nconst getShadowColor = (relation: RelationTypes) => {\r\n  switch (relation) {\r\n    case RelationTypes.INFECTIOUS:\r\n      return \"yellow\";\r\n    case RelationTypes.REMOVED:\r\n      return \"limegreen\";\r\n    default:\r\n      return \"deepskyblue\";\r\n  }\r\n};\r\n\r\ninterface BallConfig {\r\n  ctx: CanvasRenderingContext2D;\r\n  index: number;\r\n}\r\n\r\nexport class Ball {\r\n  public position: Vector;\r\n  public velocity: Vector;\r\n  public relation: RelationTypes;\r\n  public radius: number;\r\n  private count: number;\r\n  ctx: CanvasRenderingContext2D;\r\n  constructor({ ctx, index }: BallConfig) {\r\n    this.ctx = ctx;\r\n    this.count = index + 1;\r\n    this.position = new Vector(\r\n      rand(config.canvasWidth),\r\n      rand(config.canvasHeight)\r\n    );\r\n    this.velocity = new Vector(\r\n      Math.round(Math.random() * config.maxVelocity),\r\n      Math.round(Math.random() * config.maxVelocity)\r\n    );\r\n    this.relation =\r\n      this.count <= config.initialInfectious\r\n        ? RelationTypes.INFECTIOUS\r\n        : RelationTypes.SUSCEPTIBLE;\r\n    this.radius = config.ballRadius;\r\n  }\r\n\r\n  draw() {\r\n    const ctx = this.ctx;\r\n    ctx.fillStyle = getBallColor(this.relation);\r\n    ctx.shadowColor = getShadowColor(this.relation);\r\n\r\n    ctx.shadowBlur = config.ballRadius;\r\n    ctx.save();\r\n    ctx.scale(1, 1);\r\n    ctx.translate(this.position.x - 10, this.position.y - 10);\r\n    // ctx.fill(new Path2D(BALL_SVG));\r\n    const path = new Path2D();\r\n    path.moveTo(220, 60);\r\n    path.arc(170, 60, config.ballRadius, 0, 2 * Math.PI);\r\n    ctx.scale(0.1, 0.1);\r\n    ctx.fill(path);\r\n    ctx.restore();\r\n  }\r\n\r\n  translate() {\r\n    if (\r\n      this.position.x <= this.radius * 2 ||\r\n      this.position.x >= config.canvasWidth - this.radius * 2\r\n    ) {\r\n      this.velocity.x = -this.velocity.x;\r\n    }\r\n    if (\r\n      this.position.y <= this.radius * 2 ||\r\n      this.position.y >= config.canvasHeight - this.radius * 2\r\n    ) {\r\n      this.velocity.y = -this.velocity.y;\r\n    }\r\n\r\n    this.position.x += this.velocity.x;\r\n    this.position.y += this.velocity.y;\r\n  }\r\n\r\n  update() {\r\n    this.translate();\r\n    this.draw();\r\n  }\r\n\r\n  collide(ball: Ball) {\r\n    const tempVelocity = { x: this.velocity.x, y: this.velocity.y };\r\n    this.velocity.x = ball.velocity.x;\r\n    this.velocity.y = ball.velocity.y;\r\n    ball.velocity.x = tempVelocity.x;\r\n    ball.velocity.y = tempVelocity.y;\r\n  }\r\n}\r\n","import { config } from \"../config\";\r\nimport { RelationTypes } from \"../types/relations\";\r\nimport { Ball } from \"./Ball\";\r\n\r\ninterface TrackerConfig {\r\n  ctx: CanvasRenderingContext2D;\r\n  width: number;\r\n  height: number;\r\n  popSize: number;\r\n  timeToRemoved: number;\r\n  transmissionRate: number;\r\n  stats: { S: number; I: number; R: number };\r\n}\r\n\r\nexport class Tracker {\r\n  private width: number;\r\n  private height: number;\r\n  private balls: Ball[];\r\n  private ctx: TrackerConfig[\"ctx\"];\r\n  private popSize: TrackerConfig[\"popSize\"];\r\n  private timeToRemoved: TrackerConfig[\"timeToRemoved\"];\r\n  private transmissionRate: TrackerConfig[\"transmissionRate\"];\r\n  private stats: TrackerConfig[\"stats\"];\r\n\r\n  constructor({\r\n    ctx,\r\n    width,\r\n    height,\r\n    popSize,\r\n    timeToRemoved,\r\n    transmissionRate,\r\n    stats\r\n  }: TrackerConfig) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.balls = [];\r\n    this.ctx = ctx;\r\n    this.popSize = popSize;\r\n    this.timeToRemoved = timeToRemoved;\r\n    this.transmissionRate = transmissionRate;\r\n    this.stats = stats;\r\n\r\n    this.populate();\r\n    this.update();\r\n  }\r\n  coinFlip() {\r\n    return Math.random() <= this.transmissionRate;\r\n  }\r\n  tryInfect(ball: Ball) {\r\n    if (\r\n      ball.relation === RelationTypes.INFECTIOUS ||\r\n      ball.relation === RelationTypes.REMOVED\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (this.coinFlip() === true) {\r\n      ball.relation = RelationTypes.INFECTIOUS;\r\n      setTimeout(() => {\r\n        ball.relation = RelationTypes.REMOVED;\r\n      }, this.timeToRemoved * 1000);\r\n    }\r\n  }\r\n\r\n  update() {\r\n    const lengthBalls = this.balls.length;\r\n    this.ctx.clearRect(0, 0, config.canvasWidth, config.canvasHeight);\r\n    this.balls.forEach(ball => {\r\n      ball.update();\r\n    });\r\n\r\n    for (let i = 0; i < lengthBalls; i++) {\r\n      for (let j = 0; j < lengthBalls; j++) {\r\n        if (i !== j) {\r\n          if (this.isCollided(this.balls[i], this.balls[j])) {\r\n            this.balls[i].collide(this.balls[j]);\r\n            if (this.balls[i].relation === RelationTypes.INFECTIOUS) {\r\n              this.tryInfect(this.balls[j]);\r\n            }\r\n            if (this.balls[j].relation === RelationTypes.INFECTIOUS) {\r\n              this.tryInfect(this.balls[i]);\r\n            }\r\n            this.balls[i].update();\r\n            this.balls[j].update();\r\n          }\r\n        }\r\n      }\r\n    }\r\n    requestAnimationFrame(() => {\r\n      this.update();\r\n    });\r\n  }\r\n  distance(ball1: Ball, ball2: Ball) {\r\n    return Math.sqrt(\r\n      (ball1.position.x - ball2.position.x) *\r\n        (ball1.position.x - ball2.position.x) +\r\n        (ball1.position.y - ball2.position.y) *\r\n          (ball1.position.y - ball2.position.y)\r\n    );\r\n  }\r\n  isCollided(ball1: Ball, ball2: Ball) {\r\n    if (this.distance(ball1, ball2) <= ball1.radius + ball2.radius) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  populate() {\r\n    for (let i = 0; i < this.popSize; i++) {\r\n      const newBall = new Ball({\r\n        ctx: this.ctx,\r\n        index: i\r\n      });\r\n      this.balls.push(newBall);\r\n      this.balls[i].draw();\r\n    }\r\n  }\r\n\r\n  getStats() {\r\n    let S: number = 0;\r\n    let I: number = 0;\r\n    let R: number = 0;\r\n    const relationTypes = this.balls.map(ball => ball.relation);\r\n    relationTypes.forEach(type => {\r\n      if (type === RelationTypes.INFECTIOUS) {\r\n        I += 1;\r\n      }\r\n      if (type === RelationTypes.SUSCEPTIBLE) {\r\n        S += 1;\r\n      }\r\n      if (type === RelationTypes.REMOVED) {\r\n        R += 1;\r\n      }\r\n    });\r\n    console.log(this.balls.length);\r\n    return { S: S, I: I, R: R };\r\n  }\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { config } from \"../config\";\r\nimport { Tracker } from \"./Tracker\";\r\n\r\ninterface Props {\r\n  populationSize: number;\r\n  timeToRemoved: number;\r\n  transmissionRate: number;\r\n  handleSetStats: (stats: { S: number; I: number; R: number }) => void;\r\n  stats: { S: number; I: number; R: number };\r\n}\r\n\r\nexport const Canvas = (props: Props) => {\r\n  const ref = useRef<HTMLCanvasElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (ref.current) {\r\n      const ctx = ref.current.getContext(\"2d\");\r\n      ctx?.clearRect(0, 0, config.canvasWidth, config.canvasHeight);\r\n      if (ctx) {\r\n        const tracker = new Tracker({\r\n          ctx,\r\n          height: config.canvasHeight,\r\n          width: config.canvasWidth,\r\n          popSize: props.populationSize,\r\n          timeToRemoved: props.timeToRemoved,\r\n          transmissionRate: props.transmissionRate,\r\n          stats: props.stats\r\n        });\r\n        const interval = setInterval(() => {\r\n          const stats = tracker.getStats();\r\n          props.handleSetStats({ ...stats });\r\n        }, 1000);\r\n        if (interval) {\r\n          return () => {\r\n            clearInterval();\r\n          };\r\n        }\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.transmissionRate, props.populationSize, props.timeToRemoved]);\r\n  return (\r\n    <canvas\r\n      ref={ref}\r\n      width={config.canvasWidth}\r\n      height={config.canvasHeight}\r\n    ></canvas>\r\n  );\r\n};\r\n","import React from \"react\";\r\nexport const Footer = () => (\r\n  <footer className=\"jumbotron jumbotron-fluid  bg-dark\">\r\n    <div className=\"container\">\r\n      <h1 className=\"display-4\">SIR simulering</h1>\r\n      <p className=\"lead\">av Daniel Sonne Lehnberg</p>\r\n      <p>\r\n        GitHub:{\" \"}\r\n        <a href=\"https://github.com/doddydigitaldesign/simple-sim-sir\">\r\n          https://github.com/doddydigitaldesign/simple-sim-sir\r\n        </a>\r\n      </p>\r\n      <span>MIT License</span>\r\n    </div>\r\n  </footer>\r\n);\r\n","import React from \"react\";\r\n\r\ninterface Props {\r\n  populationSize: number;\r\n  timeToRemoved: number;\r\n  transmissionRate: number;\r\n  setPopulationSize: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  setTimeToRemoved: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  setTransmissionRate: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\nexport const Form = (props: Props) => {\r\n  return (\r\n    <div>\r\n      <form>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"popsize-input\" aria-describedby=\"popsizeHelp\">\r\n            Antal individer\r\n          </label>\r\n          <small id=\"popsizeHelp\" className=\"form-text\">\r\n            Se hur resultatet påverkas med olika antal individer i området.\r\n          </small>\r\n          <input\r\n            className={\"form-control\"}\r\n            type=\"number\"\r\n            min={0}\r\n            max={1000}\r\n            value={props.populationSize}\r\n            onChange={props.setPopulationSize}\r\n            name=\"population-size\"\r\n            id=\"popsize-input\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label\r\n            htmlFor=\"time-to-removed-input\"\r\n            aria-describedby=\"timeToRemovedHelp\"\r\n          >\r\n            Smittsamhetstid\r\n          </label>\r\n          <small id=\"timeToRemovedHelp\" className=\"form-text\">\r\n            Se hur resultatet påverkas om individer är smittsamma längre eller\r\n            kortare perioder.\r\n          </small>\r\n          <input\r\n            className={\"form-control\"}\r\n            type=\"number\"\r\n            value={props.timeToRemoved}\r\n            min={0.01}\r\n            max={100}\r\n            onChange={props.setTimeToRemoved}\r\n            name=\"time-to-removed-input\"\r\n            id=\"time-to-removed-input\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label\r\n            htmlFor=\"transmission-rate-input\"\r\n            aria-describedby=\"timeToRemovedHelp\"\r\n          >\r\n            Virulens\r\n          </label>\r\n          <small id=\"transmissionRateHelp\" className=\"form-text\">\r\n            Se hur resultatet påverkas om risken att smittan sprids ändras.\r\n          </small>\r\n          <input\r\n            className={\"form-control\"}\r\n            type=\"number\"\r\n            value={props.transmissionRate}\r\n            onChange={props.setTransmissionRate}\r\n            name=\"transmission-rate-input\"\r\n            id=\"transmission-rate-input\"\r\n          />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\ninterface Props {\r\n  infected: number;\r\n  removed: number;\r\n  susceptible: number;\r\n}\r\n\r\nconst ListItem = (props: {\r\n  text: string;\r\n  textColor: \"dark\" | \"light\";\r\n  bgColor: string;\r\n}) => (\r\n  <li className={\"list-group-item \" + props.bgColor}>\r\n    <span className={\"text-\" + props.textColor}>{props.text}</span>\r\n  </li>\r\n);\r\n\r\nconst Stats = (props: Props) => {\r\n  return (\r\n    <>\r\n      <ul className=\"list-group\">\r\n        <ListItem\r\n          textColor={\"light\"}\r\n          bgColor={\"bg-primary\"}\r\n          text={\"S, antal mottagliga: \" + props.susceptible}\r\n        />\r\n        <ListItem\r\n          textColor={\"light\"}\r\n          bgColor={\"bg-danger\"}\r\n          text={\"I, antal infekterade: \" + props.infected}\r\n        />\r\n        <ListItem\r\n          textColor={\"dark\"}\r\n          bgColor={\"bg-light\"}\r\n          text={\"R, antal immuna eller döda: \" + props.removed}\r\n        />\r\n      </ul>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Stats;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport \"./App.css\";\r\nimport { Canvas } from \"./components/Canvas\";\r\nimport { Footer } from \"./components/Footer\";\r\nimport { Form } from \"./components/Form\";\r\nimport Stats from \"./components/Stats\";\r\nimport { config } from \"./config\";\r\n\r\nfunction App() {\r\n  const [populationSize, setPopulationSize] = useState<number>(\r\n    config.initialPopulationSize\r\n  );\r\n  const [timeToRemoved, setTimeToRemoved] = useState<number>(\r\n    config.timeToRemoved\r\n  );\r\n  const [susceptibleCount, setSusceptibleCount] = useState<number>(\r\n    config.initialPopulationSize - config.initialInfectious\r\n  );\r\n  const [infectedCount, setInfectedCount] = useState<number>(\r\n    config.initialInfectious\r\n  );\r\n  const [removedCount, setRemovedCount] = useState<number>(0);\r\n  const [transmissionRate, setTransmissionRate] = useState<number>(\r\n    config.transmissionRate\r\n  );\r\n\r\n  const handleChangePopulationSize = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    const value = parseInt(e.target.value, 10);\r\n    if (typeof value === \"number\") {\r\n      setPopulationSize(value);\r\n      setSusceptibleCount(value - removedCount - infectedCount);\r\n    }\r\n  };\r\n\r\n  const handleChangeTimeToRemoved = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    const value = parseFloat(e.target.value);\r\n    if (typeof value === \"number\") {\r\n      setTimeToRemoved(value);\r\n    }\r\n  };\r\n\r\n  const handleChangeTransmissionRate = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    const value = parseFloat(e.target.value);\r\n    if (typeof value === \"number\") {\r\n      setTransmissionRate(value);\r\n    }\r\n  };\r\n\r\n  const handleUpdateStats = (stats: { S: number; I: number; R: number }) => {\r\n    setInfectedCount(stats.I);\r\n    setRemovedCount(stats.R);\r\n    setSusceptibleCount(stats.S);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1 className=\"h1\">SIR Simulering</h1>\r\n        <Form\r\n          populationSize={populationSize}\r\n          setPopulationSize={handleChangePopulationSize}\r\n          timeToRemoved={timeToRemoved}\r\n          setTimeToRemoved={handleChangeTimeToRemoved}\r\n          transmissionRate={transmissionRate}\r\n          setTransmissionRate={handleChangeTransmissionRate}\r\n        />\r\n\r\n        <Canvas\r\n          stats={{ S: susceptibleCount, I: infectedCount, R: removedCount }}\r\n          transmissionRate={transmissionRate}\r\n          handleSetStats={useCallback(handleUpdateStats, [handleUpdateStats])}\r\n          timeToRemoved={timeToRemoved}\r\n          populationSize={populationSize}\r\n        />\r\n        <Stats\r\n          infected={infectedCount}\r\n          susceptible={susceptibleCount}\r\n          removed={removedCount}\r\n        />\r\n      </header>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\nif (rootEl) {\r\n  ReactDOM.createRoot(rootEl).render(\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  );\r\n}\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}