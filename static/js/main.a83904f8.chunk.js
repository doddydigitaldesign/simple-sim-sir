(this["webpackJsonpsimple-sim-sir"]=this["webpackJsonpsimple-sim-sir"]||[]).push([[0],{14:function(e,t,a){e.exports=a(22)},19:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),l=a(9),o=a.n(l),c=(a(19),function(){return r.a.createElement("footer",{className:"jumbotron bg-dark text-center"},r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Source:"," ",r.a.createElement("a",{href:"https://github.com/doddydigitaldesign/simple-sim-sir"},"https://github.com/doddydigitaldesign/simple-sim-sir")),r.a.createElement("p",null,"MIT"," ",r.a.createElement("a",{href:"https://github.com/doddydigitaldesign/simple-sim-sir/blob/master/LICENSE"},"License"))))}),s=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"https://doddydigitaldesign.github.io/simple-sim-sir/"},"Contact Disease Mechanics"))},m=a(4),d={canvasWidth:.8*window.innerWidth,canvasHeight:.8*window.innerHeight,ballRadius:5,maxVelocity:1,initialInfectious:50,initialPopulationSize:1e3,transmissionRate:.01,timeToRemoved:1e4,gravity:0,timeScale:1},u=a(2),f=a(1),v=a(7),S=a(10),p=a(11),b=a(12),E=a(13),h=a(3),g=a.n(h);!function(e){e.INFECTIOUS="INFECTIOUS",e.SUSCEPTIBLE="SUSCEPTIBLE",e.REMOVED="REMOVED"}(n||(n={}));var I=function(e){switch(e){case n.INFECTIOUS:return"red";case n.REMOVED:return"white";default:return"dodgerblue"}},O=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},N=function(e){return function(){for(var e=0,t=0;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()>=e},y=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).customRef=void 0,n.state={I:e.initialInfected,R:0,S:e.populationSize-e.initialInfected,ballStates:{},engine:void 0,render:void 0},n.customRef=r.a.createRef(),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=g.a.Engine,a=g.a.Render,i=g.a.World,r=g.a.Bodies,l=g.a.Events,o=g.a.Mouse,c=g.a.MouseConstraint,s=t.create({positionIterations:1,velocityIterations:1}),m={scale:1,x:d.gravity,y:d.gravity},S={timeScale:d.timeScale,timestamp:0};s.world.gravity=m,s.timing=S;var p=a.create({element:this.customRef.current,engine:s,options:{width:d.canvasWidth,height:d.canvasHeight,wireframes:!1}});i.add(s.world,[r.rectangle(d.canvasWidth/2,0,d.canvasWidth,1,{isStatic:!0}),r.rectangle(d.canvasWidth/2,d.canvasHeight,d.canvasWidth,1,{isStatic:!0}),r.rectangle(0,d.canvasHeight/2,1,d.canvasHeight,{isStatic:!0}),r.rectangle(d.canvasWidth,d.canvasHeight/2,1,d.canvasHeight,{isStatic:!0})]);var b=Object(v.a)(Array(this.props.populationSize).keys()).map((function(e){var t=I(n.SUSCEPTIBLE);e<=d.initialInfectious&&(t=I(n.INFECTIOUS));var a={frictionStatic:0,slop:0,frictionAir:0,restitution:1,friction:0,density:10,inertia:0,speed:1,force:{x:O(-d.maxVelocity,d.maxVelocity),y:O(-d.maxVelocity,d.maxVelocity)},render:{fillStyle:t}};return r.circle(O(0,d.canvasWidth),O(0,d.canvasHeight),d.ballRadius,a)}));i.add(s.world,Object(v.a)(b));var E=o.create(p.canvas),h=c.create(s,{mouse:E,constraint:{stiffness:1,render:{visible:!1}}});i.add(s.world,h),l.on(s,"collisionStart",(function(t){for(var a=t.pairs,i=function(){var t,i,o=(l=a[r]).timeCreated,c=l.timeUpdated,s=l.bodyA,m=l.bodyB;s.render.fillStyle!==I(n.INFECTIOUS)||e.state.ballStates[s.id]||e.setState((function(e){return Object(f.a)({},e,{ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},s.id,{relation:n.INFECTIOUS,timeStamp:o}))})})),m.render.fillStyle!==I(n.INFECTIOUS)||e.state.ballStates[m.id]||e.setState((function(e){return Object(f.a)({},e,{ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.INFECTIOUS,timeStamp:o}))})})),s.render.fillStyle===I(n.INFECTIOUS)&&l.timeUpdated-(null===(t=e.state.ballStates[s.id])||void 0===t?void 0:t.timeStamp)>=e.props.timeToRemoved&&(e.setState((function(e){return Object(f.a)({},e,{I:e.I-1,R:e.R+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},s.id,{relation:n.REMOVED,timeStamp:c}))})})),s.render.fillStyle=I(n.REMOVED)),m.render.fillStyle===I(n.INFECTIOUS)&&l.timeUpdated-(null===(i=e.state.ballStates[m.id])||void 0===i?void 0:i.timeStamp)>=e.props.timeToRemoved&&(e.setState((function(e){return Object(f.a)({},e,{I:e.I-1,R:e.R+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.REMOVED,timeStamp:c}))})})),m.render.fillStyle=I(n.REMOVED)),s.render.fillStyle===I(n.SUSCEPTIBLE)&&m.render.fillStyle===I(n.INFECTIOUS)&&N(e.props.transmissionRate)&&N(1-e.props.transmissionRate)&&(e.setState((function(e){return Object(f.a)({},e,{S:e.S-1,I:e.I+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},s.id,{relation:n.INFECTIOUS,timeStamp:c}))})})),s.render.fillStyle=I(n.INFECTIOUS)),m.render.fillStyle===I(n.SUSCEPTIBLE)&&s.render.fillStyle===I(n.INFECTIOUS)&&N(1-e.props.transmissionRate)&&(e.setState((function(e){return Object(f.a)({},e,{S:e.S-1,I:e.I+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.INFECTIOUS,timeStamp:c}))})})),m.render.fillStyle=I(n.INFECTIOUS))},r=0;r<a.length;r++){var l;i()}})),t.run(s),a.run(p),this.setState({render:p,engine:s})}},{key:"componentWillUnmount",value:function(){this.state.engine&&h.Engine.clear(this.state.engine),0===this.state.I&&this.props.setRunning(!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid jumbotron bg-dark"},r.a.createElement("div",{className:"row text-center justify-content-center"},r.a.createElement("p",{className:"lead"},"Susceptible: ",this.state.S," | Infected: ",this.state.I," | Removed:"," ",this.state.R)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{ref:this.customRef})))}}]),a}(r.a.Component),w=function(){var e=Object(i.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],l=Object(i.useState)(d.initialPopulationSize),o=Object(m.a)(l,2),c=o[0],s=o[1],u=Object(i.useState)(d.initialInfectious),f=Object(m.a)(u,2),v=f[0],S=f[1],p=Object(i.useState)(d.timeToRemoved),b=Object(m.a)(p,2),E=b[0],h=b[1],g=Object(i.useState)(d.transmissionRate),I=Object(m.a)(g,2),O=I[0],N=I[1];return r.a.createElement("main",{className:"text-center"},r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col text-nowrap"},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"popSize"},"Population Size"),r.a.createElement("input",{disabled:a,id:"popSize",value:c,min:0,max:5e3,onBlur:function(e){s(+e.target.value)},type:"number",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"initialInfected"},"Initial Infected"),r.a.createElement("input",{disabled:a,id:"initialInfected",value:v,min:0,max:c,onBlur:function(e){S(+e.target.value)},type:"number",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"timeToRemoved"},"Infection Time"),r.a.createElement("input",{disabled:a,id:"timeToRemoved",value:E,min:0,onBlur:function(e){h(+e.target.value)},type:"number",className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"transmissionRate"},"Virulence"),r.a.createElement("input",{disabled:a,id:"transmissionRate",value:O,min:0,max:1,step:.01,onBlur:function(e){N(+e.target.value)},type:"range",className:"form-control-range"}))),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){n(!1)}},"Stop"),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){n(!0)}},"Start")),r.a.createElement("div",{className:"col"})),a&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(y,{setRunning:n,initialInfected:v,transmissionRate:O,timeToRemoved:E,populationSize:c})))))};var R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,null),r.a.createElement("div",{className:"App container-fluid bg-dark text-light"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col"},r.a.createElement(w,null)),r.a.createElement("div",{className:"col"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(c,null)))))},j=(a(21),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function C(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var T=document.getElementById("root");T&&o.a.createRoot(T).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null))),function(e){if("serviceWorker"in navigator){if(new URL("/simple-sim-sir",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/simple-sim-sir","/service-worker.js");j?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):C(t,e)}))}}()}},[[14,1,2]]]);
//# sourceMappingURL=main.a83904f8.chunk.js.map