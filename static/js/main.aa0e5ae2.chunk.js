(this["webpackJsonpsimple-sim-sir"]=this["webpackJsonpsimple-sim-sir"]||[]).push([[0],{14:function(e,t,a){e.exports=a(22)},19:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),l=a(9),o=a.n(l),c=(a(19),function(){return r.a.createElement("footer",{className:"jumbotron bg-dark text-break text-monospace"},r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Source:"," ",r.a.createElement("a",{href:"https://github.com/doddydigitaldesign/simple-sim-sir"},"https://github.com/doddydigitaldesign/simple-sim-sir")),r.a.createElement("p",null,"MIT"," ",r.a.createElement("a",{href:"https://github.com/doddydigitaldesign/simple-sim-sir/blob/master/LICENSE"},"License"))))}),s=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"https://doddydigitaldesign.github.io/simple-sim-sir/"},"Contact Disease Mechanics"))},m=a(4),d={canvasWidth:window.innerWidth,canvasHeight:.8*window.innerHeight,ballRadius:5,maxVelocity:1,initialInfectious:50,initialPopulationSize:1e3,transmissionRate:.01,timeToRemoved:1e4,gravity:0,timeScale:1},u=a(2),f=a(1),p=a(7),S=a(10),v=a(11),b=a(12),h=a(13),E=a(3),g=a.n(E);!function(e){e.INFECTIOUS="INFECTIOUS",e.SUSCEPTIBLE="SUSCEPTIBLE",e.REMOVED="REMOVED"}(n||(n={}));var I=function(e){switch(e){case n.INFECTIOUS:return"red";case n.REMOVED:return"white";default:return"dodgerblue"}},O=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},y=function(e){return function(){for(var e=0,t=0;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()>=e},N=function(e){return r.a.createElement("table",{className:"table table-striped table-dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Population size"),r.a.createElement("th",{scope:"col"},"Susceptible"),r.a.createElement("th",{scope:"col"},"Infected"),r.a.createElement("th",{scope:"col"},"Recovered"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},e.S+e.I+e.R),r.a.createElement("td",null,e.S),r.a.createElement("td",null,e.I),r.a.createElement("td",null,e.R))))},R=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(S.a)(this,a),(n=t.call(this,e)).customRef=void 0,n.state={I:e.initialInfected,R:0,S:e.populationSize-e.initialInfected,ballStates:{},engine:void 0,render:void 0},n.customRef=r.a.createRef(),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=g.a.Engine,a=g.a.Render,i=g.a.World,r=g.a.Bodies,l=g.a.Events,o=t.create({positionIterations:1,velocityIterations:1}),c={scale:1,x:d.gravity,y:d.gravity},s={timeScale:d.timeScale,timestamp:0};o.world.gravity=c,o.timing=s;var m=a.create({element:this.customRef.current,engine:o,options:{width:d.canvasWidth,height:d.canvasHeight,wireframes:!1,hasBounds:!0}});i.add(o.world,[r.rectangle(d.canvasWidth/2,0,d.canvasWidth,1,{isStatic:!0}),r.rectangle(d.canvasWidth/2,d.canvasHeight,d.canvasWidth,1,{isStatic:!0}),r.rectangle(0,d.canvasHeight/2,1,d.canvasHeight,{isStatic:!0}),r.rectangle(d.canvasWidth,d.canvasHeight/2,1,d.canvasHeight,{isStatic:!0})]);var S=Object(p.a)(Array(this.props.populationSize).keys()).map((function(e){var t=I(n.SUSCEPTIBLE);e<=d.initialInfectious&&(t=I(n.INFECTIOUS));var a={frictionStatic:0,slop:0,frictionAir:0,restitution:1,friction:0,density:10,inertia:0,speed:1,force:{x:O(-d.maxVelocity,d.maxVelocity),y:O(-d.maxVelocity,d.maxVelocity)},render:{fillStyle:t}};return r.circle(O(0,d.canvasWidth),O(0,d.canvasHeight),d.ballRadius,a)}));i.add(o.world,Object(p.a)(S)),l.on(o,"collisionStart",(function(t){for(var a=t.pairs,i=function(){var t,i,o=(l=a[r]).timeCreated,c=l.timeUpdated,s=l.bodyA,m=l.bodyB;s.render.fillStyle!==I(n.INFECTIOUS)||e.state.ballStates[s.id]||e.setState((function(e){return Object(f.a)({},e,{ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},s.id,{relation:n.INFECTIOUS,timeStamp:o}))})})),m.render.fillStyle!==I(n.INFECTIOUS)||e.state.ballStates[m.id]||e.setState((function(e){return Object(f.a)({},e,{ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.INFECTIOUS,timeStamp:o}))})})),s.render.fillStyle===I(n.INFECTIOUS)&&l.timeUpdated-(null===(t=e.state.ballStates[s.id])||void 0===t?void 0:t.timeStamp)>=e.props.timeToRemoved&&(e.setState((function(e){return Object(f.a)({},e,{I:0===e.I?0:e.I-1,R:0===e.I?e.R:e.R+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},s.id,{relation:n.REMOVED,timeStamp:c}))})})),s.render.fillStyle=I(n.REMOVED)),m.render.fillStyle===I(n.INFECTIOUS)&&l.timeUpdated-(null===(i=e.state.ballStates[m.id])||void 0===i?void 0:i.timeStamp)>=e.props.timeToRemoved&&(e.setState((function(e){return Object(f.a)({},e,{I:0===e.I?0:e.I-1,R:0===e.I?e.R:e.R+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.REMOVED,timeStamp:c}))})})),m.render.fillStyle=I(n.REMOVED)),s.render.fillStyle===I(n.SUSCEPTIBLE)&&m.render.fillStyle===I(n.INFECTIOUS)&&y(e.props.transmissionRate)&&y(1-e.props.transmissionRate)&&(e.setState((function(e){return Object(f.a)({},e,{S:0===e.S?0:e.S-1,I:e.I+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},s.id,{relation:n.INFECTIOUS,timeStamp:c}))})})),s.render.fillStyle=I(n.INFECTIOUS)),m.render.fillStyle===I(n.SUSCEPTIBLE)&&s.render.fillStyle===I(n.INFECTIOUS)&&y(1-e.props.transmissionRate)&&(e.setState((function(e){return Object(f.a)({},e,{S:0===e.S?0:e.S-1,I:e.I+1,ballStates:Object(f.a)({},e.ballStates,Object(u.a)({},m.id,{relation:n.INFECTIOUS,timeStamp:c}))})})),m.render.fillStyle=I(n.INFECTIOUS))},r=0;r<a.length;r++){var l;i()}})),t.run(o),a.run(m),this.setState({render:m,engine:o})}},{key:"componentWillUnmount",value:function(){this.state.engine&&E.Engine.clear(this.state.engine)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid jumbotron bg-dark"},r.a.createElement("div",{className:"row text-center justify-content-center"},r.a.createElement(N,{S:this.state.S,I:this.state.I,R:this.state.R}),r.a.createElement("div",{ref:this.customRef})))}}]),a}(r.a.Component),j=function(){var e=Object(i.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],l=Object(i.useState)(d.initialPopulationSize),o=Object(m.a)(l,2),c=o[0],s=o[1],u=Object(i.useState)(d.initialInfectious),f=Object(m.a)(u,2),p=f[0],S=f[1],v=Object(i.useState)(d.timeToRemoved),b=Object(m.a)(v,2),h=b[0],E=b[1],g=Object(i.useState)(d.transmissionRate),I=Object(m.a)(g,2),O=I[0],y=I[1];return r.a.createElement("main",{className:"container text-light"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},!a&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"popSize"},"Population Size: ",c," individuals"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},"Determines the total number of individuals used in the simulation. Larger numbers affect performance negatively."),r.a.createElement("input",{disabled:a,id:"popSize",value:c,min:0,step:50,max:5e3,onChange:function(e){s(+e.target.value)},type:"range",className:"form-control-range"})),!a&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"initialInfected"},"Initial Infected: ",p," individuals"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},"Determines the number of infected individuals at the start of the simulation."),r.a.createElement("input",{disabled:a,id:"initialInfected",value:p,min:0,step:50,max:c,onChange:function(e){S(+e.target.value)},type:"range",className:"form-control-range"})),!a&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"timeToRemoved"},"Infection Time: ",Math.floor(h/1e3),"s"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},'Determines the amount of time spent in an "infected" state.'),r.a.createElement("input",{disabled:a,id:"timeToRemoved",value:h,min:0,step:1e3,max:1e5,onChange:function(e){E(+e.target.value)},type:"range",className:"form-control-range"})),!a&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"transmissionRate"},"Virulence: ",Math.floor(100*O),"%"),r.a.createElement("small",{id:"emailHelp",className:"form-text"},"Determines the probability or spreading the infection via contact."),r.a.createElement("input",{disabled:a,id:"transmissionRate",value:O,min:0,max:1,step:.01,onChange:function(e){y(+e.target.value)},type:"range",className:"form-control-range"})),r.a.createElement("button",{disabled:!a,className:"btn btn-danger",onClick:function(e){e.preventDefault(),n(!1)}},"Stop"),r.a.createElement("button",{disabled:a,className:"btn btn-primary",onClick:function(e){e.preventDefault(),n(!0)}},"Start"))),a&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(R,{initialInfected:p,transmissionRate:O,timeToRemoved:h,populationSize:c}))))};var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null),r.a.createElement("div",{className:"container-fluid bg-dark text-light"},r.a.createElement(j,null),r.a.createElement(c,null)))},C=(a(21),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function T(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var U=document.getElementById("root");U&&o.a.createRoot(U).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null))),function(e){if("serviceWorker"in navigator){if(new URL("/simple-sim-sir",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/simple-sim-sir","/service-worker.js");C?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):T(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):T(t,e)}))}}()}},[[14,1,2]]]);
//# sourceMappingURL=main.aa0e5ae2.chunk.js.map